<UserControl x:Class="Tenpad.Core.Views.MainView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Tenpad.Core.Views"
             xmlns:handy="clr-namespace:HandyControl.Controls;assembly=HandyControl"
             xmlns:services="clr-namespace:Tenpad.Core.Services"
             xmlns:core="clr-namespace:Tenpad.Core"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <TabControl ItemsSource="{Binding TabItemCollection}"
                          SelectedItem="{Binding SelectedTabItemViewModel}"
                          >
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <DockPanel Margin="0,0" LastChildFill="True">
                        <StackPanel Orientation="Horizontal"
                                    DockPanel.Dock="Right">
                            <ToggleButton Width="30"
                                      Height="30"
                                      BorderThickness="0"
                                      IsChecked="{Binding IsPinned, Mode=TwoWay}">
                                <Image Margin="2">
                                    <Image.Source>
                                        <DrawingImage >
                                            <DrawingImage.Drawing>
                                                <DrawingGroup ClipGeometry="M0,0 V16 H16 V0 H0 Z">
                                                    <DrawingGroup.Transform>
                                                        <TranslateTransform X="0" Y="7.9891151472111233E-07" />
                                                    </DrawingGroup.Transform>
                                                    <GeometryDrawing Brush="#FF555555" Geometry="F1 M16,16z M0,0z M9.828,0.722A0.5,0.5,0,0,1,10.182,0.868L15.132,5.818A0.5,0.5,0,0,1,15.132,6.525C14.652,7.005 14.06,7.113 13.629,7.113 13.452,7.113 13.294,7.095 13.169,7.074L10.035,10.208A5.927,5.927,0,0,1,10.195,11.221C10.241,11.923,10.163,12.908,9.475,13.596A0.5,0.5,0,0,1,8.768,13.596L5.93899999999999,10.768 2.75699999999999,13.95C2.56199999999999,14.145 1.53799999999999,14.852 1.34299999999999,14.657 1.14799999999999,14.462 1.85499999999999,13.437 2.04999999999999,13.243L5.23199999999999,10.061 2.404,7.232A0.5,0.5,0,0,1,2.404,6.525C3.092,5.837,4.07699999999999,5.758,4.77899999999999,5.805A5.922,5.922,0,0,1,5.79199999999999,5.965L8.92599999999999,2.832A2.772,2.772,0,0,1,8.886,2.371C8.886,1.941,8.994,1.349,9.475,0.868000000000002A0.5,0.5,0,0,1,9.828,0.722000000000002z" />
                                                </DrawingGroup>
                                            </DrawingImage.Drawing>
                                        </DrawingImage>
                                    </Image.Source>
                                </Image>
                            </ToggleButton>
                            <Button Command="{Binding CloseTabCommand}"
                                    BorderThickness="0"
                                    Margin="0,0,20,0">
                                <Image>
                                    <Image.Source>
                                        <DrawingImage >
                                            <DrawingImage.Drawing>
                                                <DrawingGroup ClipGeometry="M0,0 V16 H16 V0 H0 Z">
                                                    <GeometryDrawing Brush="#FF555555" Geometry="F1 M16,16z M0,0z M4.646,4.646A0.5,0.5,0,0,1,5.354,4.646L8,7.293 10.646,4.646A0.5,0.5,0,0,1,11.354,5.354L8.707,8 11.354,10.646A0.5,0.5,0,0,1,10.646,11.354L8,8.707 5.354,11.354A0.5,0.5,0,0,1,4.646,10.646L7.293,8 4.646,5.354A0.5,0.5,0,0,1,4.646,4.646z" />
                                                </DrawingGroup>
                                            </DrawingImage.Drawing>
                                        </DrawingImage>
                                    </Image.Source>
                                </Image>
                            </Button>
                        </StackPanel>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Header}"/>
                    </DockPanel>
                </DataTemplate>
            </TabControl.ItemTemplate>
            <TabControl.ContentTemplateSelector>
                <services:TemplateSelector/>
            </TabControl.ContentTemplateSelector>
        </TabControl>
    </Grid>
</UserControl>
